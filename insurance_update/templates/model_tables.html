{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Model Tables</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .tab-button-active {
      color: #2563eb; /* blue-600 */
      border-color: #2563eb;
    }
    .fade-in {
      animation: fadeIn 0.4s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .active-underline {
      position: absolute;
      height: 2px;
      background: #2563eb;
      bottom: 0;
      left: 0;
      transition: all 0.3s ease-in-out;
    }
  </style>
  <script>
    function switchTab(tabId) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.add('hidden');
        tab.classList.remove('fade-in');
      });

      // Show active tab
      const activeTab = document.getElementById(tabId);
      activeTab.classList.remove('hidden');
      activeTab.classList.add('fade-in');

      // Update button styles
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('tab-button-active');
      });
      const activeBtn = document.getElementById('btn-' + tabId);
      activeBtn.classList.add('tab-button-active');

      // Move underline
      const underline = document.querySelector('.active-underline');
      underline.style.width = activeBtn.offsetWidth + "px";
      underline.style.left = activeBtn.offsetLeft + "px";

      // Save active tab
      localStorage.setItem('activeTab', tabId);
    }

    document.addEventListener("DOMContentLoaded", function () {
      const savedTab = localStorage.getItem('activeTab') || 'insurance-tab';
      switchTab(savedTab);
    });
  </script>
</head>
<body class="bg-gradient-to-r from-blue-50 to-gray-100 p-6 text-gray-800 min-h-screen">

  <!-- Header -->
  <div class="flex justify-between items-center mb-8 relative">
    <!-- Back Button -->
    <a href="{% url 'dashboard' %}" class="bg-gray-700 text-white px-4 py-2 rounded-lg shadow hover:bg-gray-800 text-sm transition">
      ‚Üê Back
    </a>

    <!-- Dynamic Title -->
    <h1 class="text-3xl font-extrabold text-blue-700 text-center flex-1 -ml-12">
      Model Tables
    </h1>

    <div class="w-16"></div> <!-- Spacer to balance flex -->
  </div>

  <!-- Tab Buttons -->
  <div class="relative border-b border-gray-300 mb-8 flex justify-center space-x-2">
    <button id="btn-insurance-tab" onclick="switchTab('insurance-tab')" class="tab-button relative px-4 py-2 font-medium text-gray-600 hover:text-blue-600 transition">
      Insurance Edits
    </button>
    <button id="btn-modifier-tab" onclick="switchTab('modifier-tab')" class="tab-button relative px-4 py-2 font-medium text-gray-600 hover:text-blue-600 transition">
      Modifier Rules
    </button>
    <button id="btn-client-tab" onclick="switchTab('client-tab')" class="tab-button relative px-4 py-2 font-medium text-gray-600 hover:text-blue-600 transition">
      Clients
    </button>
    <button id="btn-scenario-tab" onclick="switchTab('scenario-tab')" class="tab-button relative px-4 py-2 font-medium text-gray-600 hover:text-blue-600 transition">
      Scenario
    </button>
    <button id="btn-dxcategory-tab" onclick="switchTab('dxcategory-tab')" class="tab-button relative px-4 py-2 font-medium text-gray-600 hover:text-blue-600 transition">
      Dx Category
    </button>
    <button id="btn-user-tab" onclick="switchTab('user-tab')" class="tab-button relative px-4 py-2 font-medium text-gray-600 hover:text-blue-600 transition">
      User Account
    </button>
    <button id="btn-activity-tab" onclick="switchTab('activity-tab')" class="tab-button relative px-4 py-2 font-medium text-gray-600 hover:text-blue-600 transition">
      Activity Log
    </button>

    <!-- Animated underline -->
    <span class="active-underline"></span>
  </div>

  <!-- Tab Contents -->
  {% include 'tabs/client_table.html' %}
  {% include 'tabs/scenario_table.html' %}
  {% include 'tabs/dxcategory_table.html' %}
  <div id="user-tab" class="tab-content hidden">
    <p class="text-gray-500">üë§ User tab coming soon...</p>
  </div>
  {% include 'tabs/activity_log_table.html' %}
  {% include 'tabs/insurance_table.html' %}
  {% include 'tabs/modifier_table.html' %}

</body>
</html>
